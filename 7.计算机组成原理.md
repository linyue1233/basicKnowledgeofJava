# 总线

计算机系统五大部件（存储器，控制器，运算器，IO设备）之间的互连方式有两种，一种是各部之间通过单独的连线，叫做分散链接；另一种是讲各部件连到一组公共信息传输线上，叫做总线连接。



总线是连接多个部件的信息传输线，是各部件共享的传输介质，在某一时刻，只允许有一个部件向总线发送信息，而多个部件可以同时从总线上接受相同的信息。总线实际上是由多传输线或者通路组成，每条线可以传输一位二进制代码，一串二进制代码可在一段时间内逐一传输完成。



双总线结构：以CPU为中心。连接CPU和主存的总线叫做存储总线（M线），另一种用来建立CPU和I/O之间交换信息的通道，叫输入/输出总线。



存储器为中心的双总线结构，在单总线基础上，又单独开辟一条CPU与主存之间的通路，叫存储总线。只提供主存与CPU之间传输信息，既提高了传输效率，又减轻了系统总线的负担。



片内总线：是指芯片内部的总线，如在CPU芯片内部，寄存器与寄存器之间，寄存器与算逻单元ALU之间都有总线连接。

系统总线：是指CPU，主存，等各大部件之间的信息传输线。由于这些部件通常都制作在各个插件板上，又称板级总线。按照系统传输信息的不同，又可分为三类：数据总线，地址总线和控制总线。

​		数据总线用来传输各功能部件之间的数据信息，他是双向传输总线，位长与机器字长，存储字长有关，一般位8,16，32位。数据总线的条数称为数据总线宽度，是衡量系统性能的一个重要参数，如果数据总线的宽度为8位，指令字长位16位，那么，CPU在取指阶段，必须两次访问主存。 

​		地址总线，主要用来指出数据总线上的源数据或目的数据在主存单元的地址，单向传输。地址总线的个数与存储单元的个数有关，20跟对应着2的20次方个数。

​		控制总线，如何使各部件能在不同时刻占有总线使用权，需要依靠控制总线来完成，因此控制总线是用来发出各种控制信号的传输线。对于任一控制线而言，它的传输只能是单向的。但是对于控制总线来说也可以是双向的。既有出也有入。

​	时钟：用来同步各种操作；

​	复位：表示各模块恢复初始状态；

​	总线请求：表示某部件需获得总线使用权；

​	总线允许：表示需要获得总线使用权的部件已获得了控制权；

​	中断请求：表示某部件 提出中断请求；

​	中断确认：表示中断请求已被接受；

​	存储器写：将数据总线上的数据写至存储器的指定地址单元内；

​	存储器读：将指定存储单元中的数据读到数据总线上；

​	数据确认：表示数据已被接受或者已被读到总线上。

​	通信总线：用于计算机系统之间或者计算机系统与其他系统之间的通信。（串行和并行）

总线宽度：是指数据总线的根数，用bit表示，如8位，16位。

标准传输率：即在总线上每秒能传输的最大字节量，用MB/S表示

时钟同步/异步：总线上的数据与时钟同步工作的总线称为同步总线，与时钟不同步工作的总线称为异步总线。

总线复用：通常地址总线与数据总线在物理上是分开的两种总线。地址总线传输地址码，数据总线传输数据信息。为了提高总线的利用率，优化设计，将地址总线和数据总线共用一组物理线路，只是某一时刻该总线传输地址信号，另一时刻传输数据信号或者命令信号。这叫做总线的多路复用。

信号线数：即地址总线，数据总线和控制总线三种总线数的综合。

## 总线判优控制

可分为集中式和分布式，前者将控制逻辑集中在一处，后者将控制逻辑分散在总线连接的各个部位或设备上。

常见的集中控制有三种优先权仲裁方式：

（1）链式查询

（2）计数器定时查询

（3）独立请求方式

总线在完成一次传输周期，可分为四个阶段：

​	申请分配阶段

​	寻址阶段

​	传数阶段

​	结束阶段

一般常用四种方式：同步通信，异步通信，半同步通信和分离式通信。



